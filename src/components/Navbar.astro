---
const LINKS = [
  { href: "/", label: "Home" },
  { href: "/product", label: "Product" },
  { href: "/mission", label: "Mission" },
  { href: "/founders", label: "Founders" },
  { href: "/contact", label: "Contact" },
  { href: "/venture", label: "Venture" },
  { href: "/research", label: "Research" },
  { href: "/faq", label: "FAQ" },
];

const path = Astro.url.pathname;
const email = 'sproutforged@gmail.com';
const instagram = 'https://instagram.com/sproutforged';
const etsy = "https://www.etsy.com/listing/4368469267/3d-dnarna-assembly-kit-stem-learning-kit?etsrc=sdt";
const logoPath = "/images/hands-logo-lossless.webp";
---

<header class="nav-root">
  <div class="nav-inner">
    <!-- Brand -->
    <div class="brand">
      <a href="/" aria-label="HANDS â€” Home">
        <img src={logoPath} alt="HANDS logo" class="logo" width="24" height="24" decoding="async" />
        <span>HANDS</span>
      </a>
    </div>

    <!-- Center navigation (hidden on mobile) -->
    <nav class="nav-center" aria-label="Primary">
      {LINKS.map((l) => (
        <a
          class="btn-ghost"
          href={l.href}
          aria-current={path === l.href ? "page" : undefined}
        >
          {l.label}
        </a>
      ))}
    </nav>

    <!-- Actions -->
    <div class="nav-actions">
      <!-- Desktop icons (hidden on small screens) -->
      <div class="desktop-icons">
        <!-- Cart / Etsy -->
        <a
          class="icon-btn focus-ring"
          href={etsy}
          target="_blank"
          rel="noopener"
          aria-label="View on Etsy"
          title="View on Etsy"
        >
          <img
            src="/images/cart.svg"
            alt="Cart icon"
            width="18"
            height="18"
            loading="lazy"
          />
        </a>

        <!-- Email -->
        <a
          class="icon-btn focus-ring"
          href={"mailto:" + email}
          aria-label="Email"
          title="Email"
        >
          <img
            src="/images/email.svg"
            alt="Email icon"
            width="18"
            height="18"
            loading="lazy"
          />
        </a>

        <!-- Instagram -->
        <a
          class="icon-btn focus-ring"
          href={instagram}
          target="_blank"
          rel="noopener"
          aria-label="Instagram"
          title="Instagram"
        >
          <img
            src="/images/instagram.svg"
            alt="Instagram icon"
            width="18"
            height="18"
            loading="lazy"
          />
        </a>
      </div>

      <!-- Mobile menu toggle -->
      <details class="menu">
        <summary class="icon-btn focus-ring" aria-label="Open menu">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M3 6h18M3 12h18M3 18h18" />
          </svg>
        </summary>
        <div class="sheet" role="menu">
          {LINKS.map((l) => (
            <a role="menuitem" href={l.href} aria-current={path === l.href ? "page" : undefined}>
              {l.label}
            </a>
          ))}
          <hr class="separator" />
          <a role="menuitem" href={etsy} target="_blank" rel="noopener">Shop on Etsy</a>
          <a role="menuitem" href={"mailto:" + email}>Email Us</a>
          <a role="menuitem" href={instagram} target="_blank" rel="noopener">Instagram</a>
        </div>
      </details>
    </div>
  </div>
  
  <script>
  document.addEventListener('click', (event) => {
    const menu = document.querySelector('.menu');
    if (!menu) return;
    if (menu.hasAttribute('open') && !menu.contains(event.target as Node)) {
      menu.removeAttribute('open');
    }
  });
  </script>
</header>

<style>
  .nav-root {
    background: rgba(255,255,255,0.88);
    backdrop-filter: saturate(180%) blur(10px);
    border-bottom: 1px solid rgba(59,124,255,0.15);
  }

  .nav-inner {
    max-width: 1180px;
    margin: 0 auto;
    padding: 0 1rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    min-height: 64px;
    gap: 1rem;
  }

  /* Brand styling */
  .brand a {
    display: inline-flex; 
    align-items: center; 
    gap: .5rem;
    font-family: var(--font-display);
    font-weight: 800;
    color: #1e3a8a;
    font-size: 1.125rem;
    letter-spacing: 0.2px;
    text-decoration: none;
    white-space: nowrap;
  }
  
  .brand .logo {
    height: 22px; 
    width: 22px;
    border-radius: .5rem;
    box-shadow: 0 0 0 1px rgba(31,75,184,.08);
    flex-shrink: 0;
  }

  /* Center navigation - hidden on mobile */
  .nav-center {
    display: none;
    align-items: center;
    gap: .5rem;
  }
  
  @media (min-width: 940px) {
    .nav-center {
      display: flex;
      flex: 1;
      justify-content: center;
      max-width: 800px;
      margin: 0 auto;
    }
  }

  /* Action buttons */
  .nav-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* Desktop icons - hidden on mobile */
  .desktop-icons {
    display: none;
    align-items: center;
    gap: 0.5rem;
  }
  
  @media (min-width: 640px) {
    .desktop-icons {
      display: flex;
    }
  }

  /* Mobile menu */
  .menu { 
    position: relative;
    display: block;
  }
  
  @media (min-width: 940px) {
    .menu {
      display: none;
    }
  }
  
  .menu summary {
    list-style: none;
    cursor: pointer;
  }
  
  .menu summary::marker,
  .menu summary::-webkit-details-marker {
    display: none;
  }
  
  .sheet {
    position: absolute;
    right: 0;
    top: calc(100% + 8px);
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 14px;
    box-shadow: var(--shadow);
    min-width: 240px;
    max-width: 280px;
    overflow: hidden;
    display: none;
    padding: 0.25rem 0;
    z-index: 100;
  }
  
  details[open] .sheet { 
    display: flex; 
    flex-direction: column; 
  }
  
  .sheet a { 
    display: block; 
    padding: 0.85rem 1rem; 
    color: var(--text); 
    text-decoration: none; 
    white-space: nowrap;
    transition: background-color 0.15s ease;
  }
  
  .sheet a:hover {
    background: rgb(230,240,255);
    color: rgb(31,75,184);
  }
  
  .sheet a[aria-current="page"] {
    background: rgb(219,234,254);
    color: rgb(29,78,216);
    font-weight: 600;
  }
  
  .sheet a + a { 
    border-top: 1px solid var(--border); 
  }
  
  .separator { 
    border: 0; 
    height: 1px; 
    background: var(--border); 
    margin: .25rem 0; 
  }
</style>
